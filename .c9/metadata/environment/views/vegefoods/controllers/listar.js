{"filter":false,"title":"listar.js","tooltip":"/views/vegefoods/controllers/listar.js","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":0,"column":0},"end":{"row":37,"column":0},"action":"insert","lines":["const request = require('request');","const hubspot_api_token = '6c479def-bada-4289-9509-dcc814a75ad2';","","const returnedContacts = [];","let count = 5;","","module.exports = function getContacts(offset) {","    let offsetParam = null;","    if (!!offset) {","        offsetParam = `vidOffset=${offset}`;","    }","    const hapikeyParam = `hapikey=${hubspot_api_token}`;","    const paramsString = `?count=${count}&${hapikeyParam}&${offsetParam}`;","","    const finalUrl = `https:\\\\\\\\api.hubapi.com/contacts/v1/lists/all/contacts/all${paramsString}`","    console.log(finalUrl);","    request(finalUrl, (error, response, body) => {","        if (error) {","            console.log('error', error)","            throw new Error","        }","        const parsedBody = JSON.parse(body)","        parsedBody.contacts.forEach(contact => {","            returnedContacts.push(contact);","        });","        if (parsedBody['has-more']) {","            getContacts(parsedBody['vid-offset'])","        } else {","            //print out all contacts","            var i;","            for (i = 0; i < returnedContacts.length; i++) {","                console.log(returnedContacts[i].properties);","            }","        }","    })","};","",""],"id":1}],[{"start":{"row":34,"column":6},"end":{"row":34,"column":7},"action":"insert","lines":[";"],"id":2}],[{"start":{"row":26,"column":49},"end":{"row":26,"column":50},"action":"insert","lines":[";"],"id":3}],[{"start":{"row":21,"column":43},"end":{"row":21,"column":44},"action":"insert","lines":[";"],"id":4}],[{"start":{"row":19,"column":27},"end":{"row":19,"column":28},"action":"insert","lines":[";"],"id":5}],[{"start":{"row":18,"column":39},"end":{"row":18,"column":40},"action":"insert","lines":[";"],"id":6}],[{"start":{"row":14,"column":97},"end":{"row":14,"column":98},"action":"insert","lines":[";"],"id":7}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":36,"column":0},"end":{"row":36,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1587515583670,"hash":"0f7f69204e256b3af06078623a3c3ca2b819ae24"}